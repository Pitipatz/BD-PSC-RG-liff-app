<!DOCTYPE html>
<html lang="th">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</title>
</head>

<body>
  <h1>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏° ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠...</h1>

  <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
  <script>
    const liffId = "2007110168-ZWgRXyVl";  // üëâ ‡πÉ‡∏™‡πà LIFF ID ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
    const googleFormUrl = "https://docs.google.com/forms/d/e/1ucieDxGJlSZ053iEgCT8Qodjqc2x-T_7GZwMUCVXa9c/viewform?usp=pp_url"; // üëâ ‡πÉ‡∏™‡πà Google Form URL

    liff.init({ liffId })
      .then(() => {
        if (!liff.isLoggedIn()) {
          liff.login();
        } else {
          return liff.getProfile();
        }
      })
      .then(profile => {
        // üëâ ‡πÉ‡∏™‡πà Entry ID ‡∏Ç‡∏≠‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡πà‡∏≠‡∏á
        let email = "";
        const idToken = liff.getDecodedIDToken();
        if (idToken && idToken.email) {
          email = idToken.email;
        }
        const formUrl = googleFormUrl 
            + "&entry.1786871077=" + encodeURIComponent(email)  // email
            + "&entry.328090191=" + encodeURIComponent(profile.userId)  // ‡∏ä‡∏∑‡πà‡∏≠
            + "&entry.1827052488=" + encodeURIComponent(profile.displayName)  // User ID
            + "&entry.1755252609=" + encodeURIComponent(profile.pictureUrl)  // ‡∏£‡∏π‡∏õ Profile
            + "&entry.1738595997=" + encodeURIComponent(profile.statusMessage);  // Status Message

        // üî• ‡πÄ‡∏õ‡∏¥‡∏î Google Form ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà Pre-Fill
        window.location.replace(formUrl);
      })
      .catch(err => {
        console.error("LIFF Error:", err);
        alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°");
      });
  </script>

</body>
</html>
